/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var xs=Object.create;var K=Object.defineProperty,Ts=Object.defineProperties,As=Object.getOwnPropertyDescriptor,Ss=Object.getOwnPropertyDescriptors,Ps=Object.getOwnPropertyNames,We=Object.getOwnPropertySymbols,Os=Object.getPrototypeOf,Xe=Object.prototype.hasOwnProperty,Fs=Object.prototype.propertyIsEnumerable;var Ye=(e,r,t)=>r in e?K(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,U=(e,r)=>{for(var t in r||(r={}))Xe.call(r,t)&&Ye(e,t,r[t]);if(We)for(var t of We(r))Fs.call(r,t)&&Ye(e,t,r[t]);return e},z=(e,r)=>Ts(e,Ss(r)),Je=e=>K(e,"__esModule",{value:!0});var s=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Es=(e,r)=>{Je(e);for(var t in r)K(e,t,{get:r[t],enumerable:!0})},Ms=(e,r,t)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of Ps(r))!Xe.call(e,n)&&n!=="default"&&K(e,n,{get:()=>r[n],enumerable:!(t=As(r,n))||t.enumerable});return e},O=e=>Ms(Je(K(e!=null?xs(Os(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e);var g=(e,r,t)=>new Promise((n,i)=>{var a=u=>{try{l(t.next(u))}catch(c){i(c)}},o=u=>{try{l(t.throw(u))}catch(c){i(c)}},l=u=>u.done?n(u.value):Promise.resolve(u.value).then(a,o);l((t=t.apply(e,r)).next())});var be=s((ug,Ze)=>{function Ls(e,r){for(var t=-1,n=r.length,i=e.length;++t<n;)e[i+t]=r[t];return e}Ze.exports=Ls});var qe=s((cg,Qe)=>{var Is=typeof global=="object"&&global&&global.Object===Object&&global;Qe.exports=Is});var w=s((pg,er)=>{var Ds=qe(),Ns=typeof self=="object"&&self&&self.Object===Object&&self,Rs=Ds||Ns||Function("return this")();er.exports=Rs});var E=s((dg,rr)=>{var Gs=w(),Bs=Gs.Symbol;rr.exports=Bs});var ar=s((fg,ir)=>{var tr=E(),nr=Object.prototype,ks=nr.hasOwnProperty,Hs=nr.toString,$=tr?tr.toStringTag:void 0;function js(e){var r=ks.call(e,$),t=e[$];try{e[$]=void 0;var n=!0}catch(a){}var i=Hs.call(e);return n&&(r?e[$]=t:delete e[$]),i}ir.exports=js});var or=s((hg,sr)=>{var Vs=Object.prototype,Ks=Vs.toString;function Us(e){return Ks.call(e)}sr.exports=Us});var M=s((gg,cr)=>{var lr=E(),zs=ar(),$s=or(),Ws="[object Null]",Xs="[object Undefined]",ur=lr?lr.toStringTag:void 0;function Ys(e){return e==null?e===void 0?Xs:Ws:ur&&ur in Object(e)?zs(e):$s(e)}cr.exports=Ys});var L=s((yg,pr)=>{function Js(e){return e!=null&&typeof e=="object"}pr.exports=Js});var fr=s((vg,dr)=>{var Zs=M(),Qs=L(),eo="[object Arguments]";function ro(e){return Qs(e)&&Zs(e)==eo}dr.exports=ro});var ce=s((_g,yr)=>{var hr=fr(),to=L(),gr=Object.prototype,no=gr.hasOwnProperty,io=gr.propertyIsEnumerable,ao=hr(function(){return arguments}())?hr:function(e){return to(e)&&no.call(e,"callee")&&!io.call(e,"callee")};yr.exports=ao});var q=s((mg,vr)=>{var so=Array.isArray;vr.exports=so});var qr=s((bg,br)=>{var _r=E(),oo=ce(),lo=q(),mr=_r?_r.isConcatSpreadable:void 0;function uo(e){return lo(e)||oo(e)||!!(mr&&e&&e[mr])}br.exports=uo});var xr=s((qg,Cr)=>{var co=be(),po=qr();function wr(e,r,t,n,i){var a=-1,o=e.length;for(t||(t=po),i||(i=[]);++a<o;){var l=e[a];r>0&&t(l)?r>1?wr(l,r-1,t,n,i):co(i,l):n||(i[i.length]=l)}return i}Cr.exports=wr});var we=s((wg,Tr)=>{function fo(e,r){for(var t=-1,n=e==null?0:e.length,i=Array(n);++t<n;)i[t]=r(e[t],t,e);return i}Tr.exports=fo});var W=s((Cg,Ar)=>{var ho=M(),go=L(),yo="[object Symbol]";function vo(e){return typeof e=="symbol"||go(e)&&ho(e)==yo}Ar.exports=vo});var pe=s((xg,Sr)=>{var _o=q(),mo=W(),bo=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,qo=/^\w*$/;function wo(e,r){if(_o(e))return!1;var t=typeof e;return t=="number"||t=="symbol"||t=="boolean"||e==null||mo(e)?!0:qo.test(e)||!bo.test(e)||r!=null&&e in Object(r)}Sr.exports=wo});var X=s((Tg,Pr)=>{function Co(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}Pr.exports=Co});var Ce=s((Ag,Or)=>{var xo=M(),To=X(),Ao="[object AsyncFunction]",So="[object Function]",Po="[object GeneratorFunction]",Oo="[object Proxy]";function Fo(e){if(!To(e))return!1;var r=xo(e);return r==So||r==Po||r==Ao||r==Oo}Or.exports=Fo});var Er=s((Sg,Fr)=>{var Eo=w(),Mo=Eo["__core-js_shared__"];Fr.exports=Mo});var Ir=s((Pg,Lr)=>{var xe=Er(),Mr=function(){var e=/[^.]+$/.exec(xe&&xe.keys&&xe.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Lo(e){return!!Mr&&Mr in e}Lr.exports=Lo});var Te=s((Og,Dr)=>{var Io=Function.prototype,Do=Io.toString;function No(e){if(e!=null){try{return Do.call(e)}catch(r){}try{return e+""}catch(r){}}return""}Dr.exports=No});var Rr=s((Fg,Nr)=>{var Ro=Ce(),Go=Ir(),Bo=X(),ko=Te(),Ho=/[\\^$.*+?()[\]{}|]/g,jo=/^\[object .+?Constructor\]$/,Vo=Function.prototype,Ko=Object.prototype,Uo=Vo.toString,zo=Ko.hasOwnProperty,$o=RegExp("^"+Uo.call(zo).replace(Ho,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Wo(e){if(!Bo(e)||Go(e))return!1;var r=Ro(e)?$o:jo;return r.test(ko(e))}Nr.exports=Wo});var Br=s((Eg,Gr)=>{function Xo(e,r){return e==null?void 0:e[r]}Gr.exports=Xo});var A=s((Mg,kr)=>{var Yo=Rr(),Jo=Br();function Zo(e,r){var t=Jo(e,r);return Yo(t)?t:void 0}kr.exports=Zo});var Y=s((Lg,Hr)=>{var Qo=A(),el=Qo(Object,"create");Hr.exports=el});var Kr=s((Ig,Vr)=>{var jr=Y();function rl(){this.__data__=jr?jr(null):{},this.size=0}Vr.exports=rl});var zr=s((Dg,Ur)=>{function tl(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}Ur.exports=tl});var Wr=s((Ng,$r)=>{var nl=Y(),il="__lodash_hash_undefined__",al=Object.prototype,sl=al.hasOwnProperty;function ol(e){var r=this.__data__;if(nl){var t=r[e];return t===il?void 0:t}return sl.call(r,e)?r[e]:void 0}$r.exports=ol});var Yr=s((Rg,Xr)=>{var ll=Y(),ul=Object.prototype,cl=ul.hasOwnProperty;function pl(e){var r=this.__data__;return ll?r[e]!==void 0:cl.call(r,e)}Xr.exports=pl});var Zr=s((Gg,Jr)=>{var dl=Y(),fl="__lodash_hash_undefined__";function hl(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=dl&&r===void 0?fl:r,this}Jr.exports=hl});var et=s((Bg,Qr)=>{var gl=Kr(),yl=zr(),vl=Wr(),_l=Yr(),ml=Zr();function I(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}I.prototype.clear=gl;I.prototype.delete=yl;I.prototype.get=vl;I.prototype.has=_l;I.prototype.set=ml;Qr.exports=I});var tt=s((kg,rt)=>{function bl(){this.__data__=[],this.size=0}rt.exports=bl});var de=s((Hg,nt)=>{function ql(e,r){return e===r||e!==e&&r!==r}nt.exports=ql});var J=s((jg,it)=>{var wl=de();function Cl(e,r){for(var t=e.length;t--;)if(wl(e[t][0],r))return t;return-1}it.exports=Cl});var st=s((Vg,at)=>{var xl=J(),Tl=Array.prototype,Al=Tl.splice;function Sl(e){var r=this.__data__,t=xl(r,e);if(t<0)return!1;var n=r.length-1;return t==n?r.pop():Al.call(r,t,1),--this.size,!0}at.exports=Sl});var lt=s((Kg,ot)=>{var Pl=J();function Ol(e){var r=this.__data__,t=Pl(r,e);return t<0?void 0:r[t][1]}ot.exports=Ol});var ct=s((Ug,ut)=>{var Fl=J();function El(e){return Fl(this.__data__,e)>-1}ut.exports=El});var dt=s((zg,pt)=>{var Ml=J();function Ll(e,r){var t=this.__data__,n=Ml(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this}pt.exports=Ll});var Z=s(($g,ft)=>{var Il=tt(),Dl=st(),Nl=lt(),Rl=ct(),Gl=dt();function D(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}D.prototype.clear=Il;D.prototype.delete=Dl;D.prototype.get=Nl;D.prototype.has=Rl;D.prototype.set=Gl;ft.exports=D});var fe=s((Wg,ht)=>{var Bl=A(),kl=w(),Hl=Bl(kl,"Map");ht.exports=Hl});var vt=s((Xg,yt)=>{var gt=et(),jl=Z(),Vl=fe();function Kl(){this.size=0,this.__data__={hash:new gt,map:new(Vl||jl),string:new gt}}yt.exports=Kl});var mt=s((Yg,_t)=>{function Ul(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}_t.exports=Ul});var Q=s((Jg,bt)=>{var zl=mt();function $l(e,r){var t=e.__data__;return zl(r)?t[typeof r=="string"?"string":"hash"]:t.map}bt.exports=$l});var wt=s((Zg,qt)=>{var Wl=Q();function Xl(e){var r=Wl(this,e).delete(e);return this.size-=r?1:0,r}qt.exports=Xl});var xt=s((Qg,Ct)=>{var Yl=Q();function Jl(e){return Yl(this,e).get(e)}Ct.exports=Jl});var At=s((ey,Tt)=>{var Zl=Q();function Ql(e){return Zl(this,e).has(e)}Tt.exports=Ql});var Pt=s((ry,St)=>{var eu=Q();function ru(e,r){var t=eu(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this}St.exports=ru});var he=s((ty,Ot)=>{var tu=vt(),nu=wt(),iu=xt(),au=At(),su=Pt();function N(e){var r=-1,t=e==null?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}N.prototype.clear=tu;N.prototype.delete=nu;N.prototype.get=iu;N.prototype.has=au;N.prototype.set=su;Ot.exports=N});var Mt=s((ny,Et)=>{var Ft=he(),ou="Expected a function";function Ae(e,r){if(typeof e!="function"||r!=null&&typeof r!="function")throw new TypeError(ou);var t=function(){var n=arguments,i=r?r.apply(this,n):n[0],a=t.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return t.cache=a.set(i,o)||a,o};return t.cache=new(Ae.Cache||Ft),t}Ae.Cache=Ft;Et.exports=Ae});var It=s((iy,Lt)=>{var lu=Mt(),uu=500;function cu(e){var r=lu(e,function(n){return t.size===uu&&t.clear(),n}),t=r.cache;return r}Lt.exports=cu});var Nt=s((ay,Dt)=>{var pu=It(),du=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fu=/\\(\\)?/g,hu=pu(function(e){var r=[];return e.charCodeAt(0)===46&&r.push(""),e.replace(du,function(t,n,i,a){r.push(i?a.replace(fu,"$1"):n||t)}),r});Dt.exports=hu});var jt=s((sy,Ht)=>{var Rt=E(),gu=we(),yu=q(),vu=W(),_u=1/0,Gt=Rt?Rt.prototype:void 0,Bt=Gt?Gt.toString:void 0;function kt(e){if(typeof e=="string")return e;if(yu(e))return gu(e,kt)+"";if(vu(e))return Bt?Bt.call(e):"";var r=e+"";return r=="0"&&1/e==-_u?"-0":r}Ht.exports=kt});var Kt=s((oy,Vt)=>{var mu=jt();function bu(e){return e==null?"":mu(e)}Vt.exports=bu});var ge=s((ly,Ut)=>{var qu=q(),wu=pe(),Cu=Nt(),xu=Kt();function Tu(e,r){return qu(e)?e:wu(e,r)?[e]:Cu(xu(e))}Ut.exports=Tu});var R=s((uy,zt)=>{var Au=W(),Su=1/0;function Pu(e){if(typeof e=="string"||Au(e))return e;var r=e+"";return r=="0"&&1/e==-Su?"-0":r}zt.exports=Pu});var ee=s((cy,$t)=>{var Ou=ge(),Fu=R();function Eu(e,r){r=Ou(r,e);for(var t=0,n=r.length;e!=null&&t<n;)e=e[Fu(r[t++])];return t&&t==n?e:void 0}$t.exports=Eu});var Xt=s((py,Wt)=>{var Mu=Z();function Lu(){this.__data__=new Mu,this.size=0}Wt.exports=Lu});var Jt=s((dy,Yt)=>{function Iu(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t}Yt.exports=Iu});var Qt=s((fy,Zt)=>{function Du(e){return this.__data__.get(e)}Zt.exports=Du});var rn=s((hy,en)=>{function Nu(e){return this.__data__.has(e)}en.exports=Nu});var nn=s((gy,tn)=>{var Ru=Z(),Gu=fe(),Bu=he(),ku=200;function Hu(e,r){var t=this.__data__;if(t instanceof Ru){var n=t.__data__;if(!Gu||n.length<ku-1)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new Bu(n)}return t.set(e,r),this.size=t.size,this}tn.exports=Hu});var Se=s((yy,an)=>{var ju=Z(),Vu=Xt(),Ku=Jt(),Uu=Qt(),zu=rn(),$u=nn();function G(e){var r=this.__data__=new ju(e);this.size=r.size}G.prototype.clear=Vu;G.prototype.delete=Ku;G.prototype.get=Uu;G.prototype.has=zu;G.prototype.set=$u;an.exports=G});var on=s((vy,sn)=>{var Wu="__lodash_hash_undefined__";function Xu(e){return this.__data__.set(e,Wu),this}sn.exports=Xu});var un=s((_y,ln)=>{function Yu(e){return this.__data__.has(e)}ln.exports=Yu});var pn=s((my,cn)=>{var Ju=he(),Zu=on(),Qu=un();function ye(e){var r=-1,t=e==null?0:e.length;for(this.__data__=new Ju;++r<t;)this.add(e[r])}ye.prototype.add=ye.prototype.push=Zu;ye.prototype.has=Qu;cn.exports=ye});var fn=s((by,dn)=>{function ec(e,r){for(var t=-1,n=e==null?0:e.length;++t<n;)if(r(e[t],t,e))return!0;return!1}dn.exports=ec});var gn=s((qy,hn)=>{function rc(e,r){return e.has(r)}hn.exports=rc});var Pe=s((wy,yn)=>{var tc=pn(),nc=fn(),ic=gn(),ac=1,sc=2;function oc(e,r,t,n,i,a){var o=t&ac,l=e.length,u=r.length;if(l!=u&&!(o&&u>l))return!1;var c=a.get(e),p=a.get(r);if(c&&p)return c==r&&p==e;var f=-1,d=!0,y=t&sc?new tc:void 0;for(a.set(e,r),a.set(r,e);++f<l;){var m=e[f],b=r[f];if(n)var T=o?n(b,m,f,r,e,a):n(m,b,f,e,r,a);if(T!==void 0){if(T)continue;d=!1;break}if(y){if(!nc(r,function(S,P){if(!ic(y,P)&&(m===S||i(m,S,t,n,a)))return y.push(P)})){d=!1;break}}else if(!(m===b||i(m,b,t,n,a))){d=!1;break}}return a.delete(e),a.delete(r),d}yn.exports=oc});var _n=s((Cy,vn)=>{var lc=w(),uc=lc.Uint8Array;vn.exports=uc});var bn=s((xy,mn)=>{function cc(e){var r=-1,t=Array(e.size);return e.forEach(function(n,i){t[++r]=[i,n]}),t}mn.exports=cc});var wn=s((Ty,qn)=>{function pc(e){var r=-1,t=Array(e.size);return e.forEach(function(n){t[++r]=n}),t}qn.exports=pc});var Sn=s((Ay,An)=>{var Cn=E(),xn=_n(),dc=de(),fc=Pe(),hc=bn(),gc=wn(),yc=1,vc=2,_c="[object Boolean]",mc="[object Date]",bc="[object Error]",qc="[object Map]",wc="[object Number]",Cc="[object RegExp]",xc="[object Set]",Tc="[object String]",Ac="[object Symbol]",Sc="[object ArrayBuffer]",Pc="[object DataView]",Tn=Cn?Cn.prototype:void 0,Oe=Tn?Tn.valueOf:void 0;function Oc(e,r,t,n,i,a,o){switch(t){case Pc:if(e.byteLength!=r.byteLength||e.byteOffset!=r.byteOffset)return!1;e=e.buffer,r=r.buffer;case Sc:return!(e.byteLength!=r.byteLength||!a(new xn(e),new xn(r)));case _c:case mc:case wc:return dc(+e,+r);case bc:return e.name==r.name&&e.message==r.message;case Cc:case Tc:return e==r+"";case qc:var l=hc;case xc:var u=n&yc;if(l||(l=gc),e.size!=r.size&&!u)return!1;var c=o.get(e);if(c)return c==r;n|=vc,o.set(e,r);var p=fc(l(e),l(r),n,i,a,o);return o.delete(e),p;case Ac:if(Oe)return Oe.call(e)==Oe.call(r)}return!1}An.exports=Oc});var On=s((Sy,Pn)=>{var Fc=be(),Ec=q();function Mc(e,r,t){var n=r(e);return Ec(e)?n:Fc(n,t(e))}Pn.exports=Mc});var En=s((Py,Fn)=>{function Lc(e,r){for(var t=-1,n=e==null?0:e.length,i=0,a=[];++t<n;){var o=e[t];r(o,t,e)&&(a[i++]=o)}return a}Fn.exports=Lc});var Ln=s((Oy,Mn)=>{function Ic(){return[]}Mn.exports=Ic});var Nn=s((Fy,Dn)=>{var Dc=En(),Nc=Ln(),Rc=Object.prototype,Gc=Rc.propertyIsEnumerable,In=Object.getOwnPropertySymbols,Bc=In?function(e){return e==null?[]:(e=Object(e),Dc(In(e),function(r){return Gc.call(e,r)}))}:Nc;Dn.exports=Bc});var Gn=s((Ey,Rn)=>{function kc(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}Rn.exports=kc});var kn=s((My,Bn)=>{function Hc(){return!1}Bn.exports=Hc});var Fe=s((re,B)=>{var jc=w(),Vc=kn(),Hn=typeof re=="object"&&re&&!re.nodeType&&re,jn=Hn&&typeof B=="object"&&B&&!B.nodeType&&B,Kc=jn&&jn.exports===Hn,Vn=Kc?jc.Buffer:void 0,Uc=Vn?Vn.isBuffer:void 0,zc=Uc||Vc;B.exports=zc});var te=s((Ly,Kn)=>{var $c=9007199254740991,Wc=/^(?:0|[1-9]\d*)$/;function Xc(e,r){var t=typeof e;return r=r==null?$c:r,!!r&&(t=="number"||t!="symbol"&&Wc.test(e))&&e>-1&&e%1==0&&e<r}Kn.exports=Xc});var ve=s((Iy,Un)=>{var Yc=9007199254740991;function Jc(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Yc}Un.exports=Jc});var $n=s((Dy,zn)=>{var Zc=M(),Qc=ve(),ep=L(),rp="[object Arguments]",tp="[object Array]",np="[object Boolean]",ip="[object Date]",ap="[object Error]",sp="[object Function]",op="[object Map]",lp="[object Number]",up="[object Object]",cp="[object RegExp]",pp="[object Set]",dp="[object String]",fp="[object WeakMap]",hp="[object ArrayBuffer]",gp="[object DataView]",yp="[object Float32Array]",vp="[object Float64Array]",_p="[object Int8Array]",mp="[object Int16Array]",bp="[object Int32Array]",qp="[object Uint8Array]",wp="[object Uint8ClampedArray]",Cp="[object Uint16Array]",xp="[object Uint32Array]",h={};h[yp]=h[vp]=h[_p]=h[mp]=h[bp]=h[qp]=h[wp]=h[Cp]=h[xp]=!0;h[rp]=h[tp]=h[hp]=h[np]=h[gp]=h[ip]=h[ap]=h[sp]=h[op]=h[lp]=h[up]=h[cp]=h[pp]=h[dp]=h[fp]=!1;function Tp(e){return ep(e)&&Qc(e.length)&&!!h[Zc(e)]}zn.exports=Tp});var Ee=s((Ny,Wn)=>{function Ap(e){return function(r){return e(r)}}Wn.exports=Ap});var Yn=s((ie,k)=>{var Sp=qe(),Xn=typeof ie=="object"&&ie&&!ie.nodeType&&ie,ne=Xn&&typeof k=="object"&&k&&!k.nodeType&&k,Pp=ne&&ne.exports===Xn,Me=Pp&&Sp.process,Op=function(){try{var e=ne&&ne.require&&ne.require("util").types;return e||Me&&Me.binding&&Me.binding("util")}catch(r){}}();k.exports=Op});var Le=s((Ry,Qn)=>{var Fp=$n(),Ep=Ee(),Jn=Yn(),Zn=Jn&&Jn.isTypedArray,Mp=Zn?Ep(Zn):Fp;Qn.exports=Mp});var ri=s((Gy,ei)=>{var Lp=Gn(),Ip=ce(),Dp=q(),Np=Fe(),Rp=te(),Gp=Le(),Bp=Object.prototype,kp=Bp.hasOwnProperty;function Hp(e,r){var t=Dp(e),n=!t&&Ip(e),i=!t&&!n&&Np(e),a=!t&&!n&&!i&&Gp(e),o=t||n||i||a,l=o?Lp(e.length,String):[],u=l.length;for(var c in e)(r||kp.call(e,c))&&!(o&&(c=="length"||i&&(c=="offset"||c=="parent")||a&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||Rp(c,u)))&&l.push(c);return l}ei.exports=Hp});var ni=s((By,ti)=>{var jp=Object.prototype;function Vp(e){var r=e&&e.constructor,t=typeof r=="function"&&r.prototype||jp;return e===t}ti.exports=Vp});var ai=s((ky,ii)=>{function Kp(e,r){return function(t){return e(r(t))}}ii.exports=Kp});var oi=s((Hy,si)=>{var Up=ai(),zp=Up(Object.keys,Object);si.exports=zp});var ui=s((jy,li)=>{var $p=ni(),Wp=oi(),Xp=Object.prototype,Yp=Xp.hasOwnProperty;function Jp(e){if(!$p(e))return Wp(e);var r=[];for(var t in Object(e))Yp.call(e,t)&&t!="constructor"&&r.push(t);return r}li.exports=Jp});var ae=s((Vy,ci)=>{var Zp=Ce(),Qp=ve();function ed(e){return e!=null&&Qp(e.length)&&!Zp(e)}ci.exports=ed});var _e=s((Ky,pi)=>{var rd=ri(),td=ui(),nd=ae();function id(e){return nd(e)?rd(e):td(e)}pi.exports=id});var fi=s((Uy,di)=>{var ad=On(),sd=Nn(),od=_e();function ld(e){return ad(e,od,sd)}di.exports=ld});var yi=s((zy,gi)=>{var hi=fi(),ud=1,cd=Object.prototype,pd=cd.hasOwnProperty;function dd(e,r,t,n,i,a){var o=t&ud,l=hi(e),u=l.length,c=hi(r),p=c.length;if(u!=p&&!o)return!1;for(var f=u;f--;){var d=l[f];if(!(o?d in r:pd.call(r,d)))return!1}var y=a.get(e),m=a.get(r);if(y&&m)return y==r&&m==e;var b=!0;a.set(e,r),a.set(r,e);for(var T=o;++f<u;){d=l[f];var S=e[d],P=r[d];if(n)var $e=o?n(P,S,d,r,e,a):n(S,P,d,e,r,a);if(!($e===void 0?S===P||i(S,P,t,n,a):$e)){b=!1;break}T||(T=d=="constructor")}if(b&&!T){var le=e.constructor,ue=r.constructor;le!=ue&&"constructor"in e&&"constructor"in r&&!(typeof le=="function"&&le instanceof le&&typeof ue=="function"&&ue instanceof ue)&&(b=!1)}return a.delete(e),a.delete(r),b}gi.exports=dd});var _i=s(($y,vi)=>{var fd=A(),hd=w(),gd=fd(hd,"DataView");vi.exports=gd});var bi=s((Wy,mi)=>{var yd=A(),vd=w(),_d=yd(vd,"Promise");mi.exports=_d});var wi=s((Xy,qi)=>{var md=A(),bd=w(),qd=md(bd,"Set");qi.exports=qd});var xi=s((Yy,Ci)=>{var wd=A(),Cd=w(),xd=wd(Cd,"WeakMap");Ci.exports=xd});var Mi=s((Jy,Ei)=>{var Ie=_i(),De=fe(),Ne=bi(),Re=wi(),Ge=xi(),Ti=M(),H=Te(),Ai="[object Map]",Td="[object Object]",Si="[object Promise]",Pi="[object Set]",Oi="[object WeakMap]",Fi="[object DataView]",Ad=H(Ie),Sd=H(De),Pd=H(Ne),Od=H(Re),Fd=H(Ge),F=Ti;(Ie&&F(new Ie(new ArrayBuffer(1)))!=Fi||De&&F(new De)!=Ai||Ne&&F(Ne.resolve())!=Si||Re&&F(new Re)!=Pi||Ge&&F(new Ge)!=Oi)&&(F=function(e){var r=Ti(e),t=r==Td?e.constructor:void 0,n=t?H(t):"";if(n)switch(n){case Ad:return Fi;case Sd:return Ai;case Pd:return Si;case Od:return Pi;case Fd:return Oi}return r});Ei.exports=F});var ki=s((Zy,Bi)=>{var Be=Se(),Ed=Pe(),Md=Sn(),Ld=yi(),Li=Mi(),Ii=q(),Di=Fe(),Id=Le(),Dd=1,Ni="[object Arguments]",Ri="[object Array]",me="[object Object]",Nd=Object.prototype,Gi=Nd.hasOwnProperty;function Rd(e,r,t,n,i,a){var o=Ii(e),l=Ii(r),u=o?Ri:Li(e),c=l?Ri:Li(r);u=u==Ni?me:u,c=c==Ni?me:c;var p=u==me,f=c==me,d=u==c;if(d&&Di(e)){if(!Di(r))return!1;o=!0,p=!1}if(d&&!p)return a||(a=new Be),o||Id(e)?Ed(e,r,t,n,i,a):Md(e,r,u,t,n,i,a);if(!(t&Dd)){var y=p&&Gi.call(e,"__wrapped__"),m=f&&Gi.call(r,"__wrapped__");if(y||m){var b=y?e.value():e,T=m?r.value():r;return a||(a=new Be),i(b,T,t,n,a)}}return d?(a||(a=new Be),Ld(e,r,t,n,i,a)):!1}Bi.exports=Rd});var ke=s((Qy,Vi)=>{var Gd=ki(),Hi=L();function ji(e,r,t,n,i){return e===r?!0:e==null||r==null||!Hi(e)&&!Hi(r)?e!==e&&r!==r:Gd(e,r,t,n,ji,i)}Vi.exports=ji});var Ui=s((ev,Ki)=>{var Bd=Se(),kd=ke(),Hd=1,jd=2;function Vd(e,r,t,n){var i=t.length,a=i,o=!n;if(e==null)return!a;for(e=Object(e);i--;){var l=t[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<a;){l=t[i];var u=l[0],c=e[u],p=l[1];if(o&&l[2]){if(c===void 0&&!(u in e))return!1}else{var f=new Bd;if(n)var d=n(c,p,u,e,r,f);if(!(d===void 0?kd(p,c,Hd|jd,n,f):d))return!1}}return!0}Ki.exports=Vd});var He=s((rv,zi)=>{var Kd=X();function Ud(e){return e===e&&!Kd(e)}zi.exports=Ud});var Wi=s((tv,$i)=>{var zd=He(),$d=_e();function Wd(e){for(var r=$d(e),t=r.length;t--;){var n=r[t],i=e[n];r[t]=[n,i,zd(i)]}return r}$i.exports=Wd});var je=s((nv,Xi)=>{function Xd(e,r){return function(t){return t==null?!1:t[e]===r&&(r!==void 0||e in Object(t))}}Xi.exports=Xd});var Ji=s((iv,Yi)=>{var Yd=Ui(),Jd=Wi(),Zd=je();function Qd(e){var r=Jd(e);return r.length==1&&r[0][2]?Zd(r[0][0],r[0][1]):function(t){return t===e||Yd(t,e,r)}}Yi.exports=Qd});var Qi=s((av,Zi)=>{var ef=ee();function rf(e,r,t){var n=e==null?void 0:ef(e,r);return n===void 0?t:n}Zi.exports=rf});var ra=s((sv,ea)=>{function tf(e,r){return e!=null&&r in Object(e)}ea.exports=tf});var na=s((ov,ta)=>{var nf=ge(),af=ce(),sf=q(),of=te(),lf=ve(),uf=R();function cf(e,r,t){r=nf(r,e);for(var n=-1,i=r.length,a=!1;++n<i;){var o=uf(r[n]);if(!(a=e!=null&&t(e,o)))break;e=e[o]}return a||++n!=i?a:(i=e==null?0:e.length,!!i&&lf(i)&&of(o,i)&&(sf(e)||af(e)))}ta.exports=cf});var aa=s((lv,ia)=>{var pf=ra(),df=na();function ff(e,r){return e!=null&&df(e,r,pf)}ia.exports=ff});var oa=s((uv,sa)=>{var hf=ke(),gf=Qi(),yf=aa(),vf=pe(),_f=He(),mf=je(),bf=R(),qf=1,wf=2;function Cf(e,r){return vf(e)&&_f(r)?mf(bf(e),r):function(t){var n=gf(t,e);return n===void 0&&n===r?yf(t,e):hf(r,n,qf|wf)}}sa.exports=Cf});var se=s((cv,la)=>{function xf(e){return e}la.exports=xf});var ca=s((pv,ua)=>{function Tf(e){return function(r){return r==null?void 0:r[e]}}ua.exports=Tf});var da=s((dv,pa)=>{var Af=ee();function Sf(e){return function(r){return Af(r,e)}}pa.exports=Sf});var ha=s((fv,fa)=>{var Pf=ca(),Of=da(),Ff=pe(),Ef=R();function Mf(e){return Ff(e)?Pf(Ef(e)):Of(e)}fa.exports=Mf});var Ve=s((hv,ga)=>{var Lf=Ji(),If=oa(),Df=se(),Nf=q(),Rf=ha();function Gf(e){return typeof e=="function"?e:e==null?Df:typeof e=="object"?Nf(e)?If(e[0],e[1]):Lf(e):Rf(e)}ga.exports=Gf});var va=s((gv,ya)=>{function Bf(e){return function(r,t,n){for(var i=-1,a=Object(r),o=n(r),l=o.length;l--;){var u=o[e?l:++i];if(t(a[u],u,a)===!1)break}return r}}ya.exports=Bf});var ma=s((yv,_a)=>{var kf=va(),Hf=kf();_a.exports=Hf});var qa=s((vv,ba)=>{var jf=ma(),Vf=_e();function Kf(e,r){return e&&jf(e,r,Vf)}ba.exports=Kf});var Ca=s((_v,wa)=>{var Uf=ae();function zf(e,r){return function(t,n){if(t==null)return t;if(!Uf(t))return e(t,n);for(var i=t.length,a=r?i:-1,o=Object(t);(r?a--:++a<i)&&n(o[a],a,o)!==!1;);return t}}wa.exports=zf});var Ta=s((mv,xa)=>{var $f=qa(),Wf=Ca(),Xf=Wf($f);xa.exports=Xf});var Sa=s((bv,Aa)=>{var Yf=Ta(),Jf=ae();function Zf(e,r){var t=-1,n=Jf(e)?Array(e.length):[];return Yf(e,function(i,a,o){n[++t]=r(i,a,o)}),n}Aa.exports=Zf});var Oa=s((qv,Pa)=>{function Qf(e,r){var t=e.length;for(e.sort(r);t--;)e[t]=e[t].value;return e}Pa.exports=Qf});var Ma=s((wv,Ea)=>{var Fa=W();function eh(e,r){if(e!==r){var t=e!==void 0,n=e===null,i=e===e,a=Fa(e),o=r!==void 0,l=r===null,u=r===r,c=Fa(r);if(!l&&!c&&!a&&e>r||a&&o&&u&&!l&&!c||n&&o&&u||!t&&u||!i)return 1;if(!n&&!a&&!c&&e<r||c&&t&&i&&!n&&!a||l&&t&&i||!o&&i||!u)return-1}return 0}Ea.exports=eh});var Ia=s((Cv,La)=>{var rh=Ma();function th(e,r,t){for(var n=-1,i=e.criteria,a=r.criteria,o=i.length,l=t.length;++n<o;){var u=rh(i[n],a[n]);if(u){if(n>=l)return u;var c=t[n];return u*(c=="desc"?-1:1)}}return e.index-r.index}La.exports=th});var Na=s((xv,Da)=>{var Ke=we(),nh=ee(),ih=Ve(),ah=Sa(),sh=Oa(),oh=Ee(),lh=Ia(),uh=se(),ch=q();function ph(e,r,t){r.length?r=Ke(r,function(a){return ch(a)?function(o){return nh(o,a.length===1?a[0]:a)}:a}):r=[uh];var n=-1;r=Ke(r,oh(ih));var i=ah(e,function(a,o,l){var u=Ke(r,function(c){return c(a)});return{criteria:u,index:++n,value:a}});return sh(i,function(a,o){return lh(a,o,t)})}Da.exports=ph});var Ga=s((Tv,Ra)=>{function dh(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}Ra.exports=dh});var Ha=s((Av,ka)=>{var fh=Ga(),Ba=Math.max;function hh(e,r,t){return r=Ba(r===void 0?e.length-1:r,0),function(){for(var n=arguments,i=-1,a=Ba(n.length-r,0),o=Array(a);++i<a;)o[i]=n[r+i];i=-1;for(var l=Array(r+1);++i<r;)l[i]=n[i];return l[r]=t(o),fh(e,this,l)}}ka.exports=hh});var Va=s((Sv,ja)=>{function gh(e){return function(){return e}}ja.exports=gh});var Ua=s((Pv,Ka)=>{var yh=A(),vh=function(){try{var e=yh(Object,"defineProperty");return e({},"",{}),e}catch(r){}}();Ka.exports=vh});var Wa=s((Ov,$a)=>{var _h=Va(),za=Ua(),mh=se(),bh=za?function(e,r){return za(e,"toString",{configurable:!0,enumerable:!1,value:_h(r),writable:!0})}:mh;$a.exports=bh});var Ya=s((Fv,Xa)=>{var qh=800,wh=16,Ch=Date.now;function xh(e){var r=0,t=0;return function(){var n=Ch(),i=wh-(n-t);if(t=n,i>0){if(++r>=qh)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}Xa.exports=xh});var Za=s((Ev,Ja)=>{var Th=Wa(),Ah=Ya(),Sh=Ah(Th);Ja.exports=Sh});var es=s((Mv,Qa)=>{var Ph=se(),Oh=Ha(),Fh=Za();function Eh(e,r){return Fh(Oh(e,r,Ph),e+"")}Qa.exports=Eh});var ts=s((Lv,rs)=>{var Mh=de(),Lh=ae(),Ih=te(),Dh=X();function Nh(e,r,t){if(!Dh(t))return!1;var n=typeof r;return(n=="number"?Lh(t)&&Ih(r,t.length):n=="string"&&r in t)?Mh(t[r],e):!1}rs.exports=Nh});var as=s((Iv,is)=>{var Rh=xr(),Gh=Na(),Bh=es(),ns=ts(),kh=Bh(function(e,r){if(e==null)return[];var t=r.length;return t>1&&ns(e,r[0],r[1])?r=[]:t>2&&ns(r[0],r[1],r[2])&&(r=[r[0]]),Gh(e,Rh(r,1),[])});is.exports=kh});var os=s((Dv,ss)=>{function Hh(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}ss.exports=Hh});var us=s((Nv,ls)=>{function jh(e,r,t){var n=-1,i=e.length;r<0&&(r=-r>i?0:i+r),t=t>i?i:t,t<0&&(t+=i),i=r>t?0:t-r>>>0,r>>>=0;for(var a=Array(i);++n<i;)a[n]=e[n+r];return a}ls.exports=jh});var ps=s((Rv,cs)=>{var Vh=ee(),Kh=us();function Uh(e,r){return r.length<2?e:Vh(e,Kh(r,0,-1))}cs.exports=Uh});var fs=s((Gv,ds)=>{var zh=ge(),$h=os(),Wh=ps(),Xh=R();function Yh(e,r){return r=zh(r,e),e=Wh(e,r),e==null||delete e[Xh($h(r))]}ds.exports=Yh});var gs=s((Bv,hs)=>{var Jh=fs(),Zh=te(),Qh=Array.prototype,eg=Qh.splice;function rg(e,r){for(var t=e?r.length:0,n=t-1;t--;){var i=r[t];if(t==n||i!==a){var a=i;Zh(i)?eg.call(e,i,1):Jh(e,i)}}return e}hs.exports=rg});var vs=s((kv,ys)=>{var tg=Ve(),ng=gs();function ig(e,r){var t=[];if(!(e&&e.length))return t;var n=-1,i=[],a=e.length;for(r=tg(r,3);++n<a;){var o=e[n];r(o,n,e)&&(t.push(o),i.push(n))}return ng(e,i),t}ys.exports=ig});Es(exports,{default:()=>ze});var qs=O(as()),ws=O(vs()),v=O(require("obsidian")),Cs=O(require("@codemirror/language"));function oe(e,r){let t=Object.keys(r).map(n=>ag(e,n,r[n]));return t.length===1?t[0]:function(){t.forEach(n=>n())}}function ag(e,r,t){let n=e[r],i=e.hasOwnProperty(r),a=t(n);return n&&Object.setPrototypeOf(a,n),Object.setPrototypeOf(o,a),e[r]=o,l;function o(...u){return a===n&&e[r]===o&&l(),a.apply(this,u)}function l(){e[r]===o&&(i?e[r]=n:delete e[r]),a!==n&&(a=n,Object.setPrototypeOf(o,n||Function))}}var _=O(require("@codemirror/view")),j=O(require("obsidian")),_s=class extends _.WidgetType{constructor(r,t,n,i){super();this.app=r;this.view=t;this.from=n;this.to=i}eq(r){return r.view===this.view&&r.from===this.from&&r.to===this.to}toDOM(){let r=createSpan("cm-creases-icon");return(0,j.setIcon)(r,"shirt",12),r.addEventListener("click",t=>{new j.Menu(this.app).addItem(i=>i.setTitle("Remove crease").setIcon("x").onClick(()=>{this.view.dispatch({changes:{from:this.from,to:this.to,insert:""}})})).showAtMouseEvent(t)}),r}ignoreEvent(){return!1}};function ms(e){return _.ViewPlugin.fromClass(class{constructor(r){this.view=r;this.decorations=_.Decoration.none;this.allDecos=_.Decoration.none;this.decorator=new _.MatchDecorator({regexp:/\B%%\s+fold\s+%%\B/g,decoration:this.getDeco.bind(this)}),this.decorations=this.decorator.createDeco(r)}getDeco(r,t,n){let i=n,a=n+r[0].length;return _.Decoration.replace({widget:new _s(e,this.view,i,a)})}update(r){if(!r.state.field(j.editorLivePreviewField)){this.decorations=_.Decoration.none;return}this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations,provide:_.PluginField.atomicRanges.from(r=>r.decorations)})}var C=/%%\s+fold\s+%%/;function x(e){return C.test(e)}var V=O(require("obsidian")),bs={onOpenCreasesBehavior:"preserve-fold-state",templateCreasesBehavior:"start-folded",syncOutlineView:"from-editor-to-outline"},Ue=class extends V.PluginSettingTab{constructor(r,t){super(r,t);this.plugin=t}display(){let{containerEl:r}=this;r.empty(),r.createEl("h3",{text:"Folding"}),new V.Setting(r).setName("Sync editor folds with outline view").addDropdown(t=>{t.addOptions({"from-editor-to-outline":"From editor to outline",none:"None"}),t.setValue(this.plugin.settings.syncOutlineView),t.onChange(n=>g(this,null,function*(){this.plugin.settings.syncOutlineView=n,yield this.plugin.saveSettings()}))}),r.createEl("h3",{text:"Crease Behavior"}),new V.Setting(r).setName("How should creases behave when opening a new file?").setDesc("By default, creases will not override what content you have folded in your file. You can change this so that creases always start folded.").addDropdown(t=>{t.addOptions({"always-fold":"Always fold creases","preserve-fold-state":"Respect existing fold state"}),t.setValue(this.plugin.settings.onOpenCreasesBehavior),t.onChange(n=>g(this,null,function*(){this.plugin.settings.onOpenCreasesBehavior=n,yield this.plugin.saveSettings()}))}),new V.Setting(r).setName("How should creases in templates behave?").setDesc("When creating a new file with creases in the template, do you want the creases to start folded or unfolded? Choose 'fold and clear' to have the creases folded and removed from the newly created note.").addDropdown(t=>{t.addOptions({"start-folded":"Start folded","start-unfolded":"Start unfolded","fold-and-clear":"Fold them and clear the creases"}),t.setValue(this.plugin.settings.templateCreasesBehavior),t.onChange(n=>g(this,null,function*(){this.plugin.settings.templateCreasesBehavior=n,yield this.plugin.saveSettings()}))})}};var sg=[1,2,3,4,5,6];function og(e,r,t){let{anchor:n,head:i}=e;return n.line>=r&&n.line<=t||i.line>=r&&i.line<=t||i.line<r&&n.line>t||n.line<r&&i.line>t}var ze=class extends v.Plugin{onload(){return g(this,null,function*(){yield this.loadSettings(),this.registerSettingsTab(),this.registerEditorExtension(ms(this.app)),this.addCommand({id:"fold",name:"Fold along creases",checkCallback:r=>{let t=this.app.workspace.getActiveViewOfType(v.MarkdownView);if(r)return!!t;t&&this.foldCreasesForView(t)}}),this.addCommand({id:"toggle-crease",name:"Toggle crease",editorCallback:this.toggleCrease.bind(this)}),this.addCommand({id:"crease-current-folds",name:"Crease the current folds",editorCallback:this.creaseCurrentFolds.bind(this)}),this.addCommand({id:"clear-creases",name:"Iron out (clear) the creases",editorCallback:this.clearCreases.bind(this)}),this.addCommand({id:"increase-fold-level-at-cursor",name:"Fold more",editorCallback:this.increaseFoldLevelAtCursor.bind(this)}),this.addCommand({id:"decrease-fold-level-at-cursor",name:"Fold less",editorCallback:this.decreaseFoldLevelAtCursor.bind(this)}),this.addCommand({id:"increase-fold-level",name:"Increase heading fold level",editorCallback:this.increaseHeadingFoldLevel.bind(this)}),this.addCommand({id:"decrease-fold-level",name:"Decrease heading fold level",editorCallback:this.decreaseHeadingFoldLevel.bind(this)}),this.app.workspace.onLayoutReady(()=>{this.registerEvent(this.app.vault.on("create",this.onNewFile.bind(this))),this.registerEvent(this.app.workspace.on("file-open",this.onFileOpen.bind(this))),this.patchMarkdownView(),this.patchCoreTemplatePlugin(),this.patchFileSuggest(),this.patchCoreOutlinePlugin()}),sg.forEach(r=>{this.addCommand({id:`toggle-fold-heading-level-${r}`,name:`Toggle fold for H${r}`,checkCallback:t=>{var i,a;let n=this.app.workspace.getActiveViewOfType(v.MarkdownView);if(!n)return!1;if(t)return((a=(i=this.app.metadataCache.getFileCache(n.file))==null?void 0:i.headings)!=null?a:[]).find(l=>l.level===r)!==void 0;this.toggleFoldForHeadingLevel(n,r)}})}),this.registerEvent(this.app.workspace.on("editor-menu",this.onEditorMenu,this)),this.registerEvent(this.app.workspace.on("templater:overwrite-file",this.onTemplaterNewFile,this)),this.registerEvent(this.app.workspace.on("templater:new-note-from-template",this.onTemplaterNewFile,this)),this.registerEvent(this.app.workspace.on("templater:template-appended",this.onTemplateAppend,this)),this.registerEvent(this.app.workspace.on("templates:template-appended",this.onTemplateAppend,this))})}increaseFoldLevelAtCursor(r,t){return g(this,null,function*(){var o;let n=yield this.app.foldManager.load(t.file),i=(o=n==null?void 0:n.folds)!=null?o:[];r.listSelections().forEach(l=>{let u=this.getAllParentFolds(r,l);for(let c=u.length-1;c>=0;c--){let p=u[c];if(!i.find(f=>f.from===p.from)){i.push(p);break}}}),t.currentMode.applyFoldInfo({folds:i,lines:t.editor.lineCount()}),t.onMarkdownFold()})}handleNewFile(r,t){return g(this,null,function*(){["start-folded","fold-and-clear"].contains(this.settings.templateCreasesBehavior)&&x(t)&&(this.foldCreasesForFile(r),this.settings.templateCreasesBehavior==="fold-and-clear"&&this.app.vault.modify(r,t.replace(new RegExp(C,"g"),"")))})}onFileOpen(r){r&&this.settings.onOpenCreasesBehavior==="always-fold"&&this.foldCreasesForFile(r)}onNewFile(r){return g(this,null,function*(){if(!(r instanceof v.TFile))return;let t=yield this.app.vault.cachedRead(r);this.handleNewFile(r,t)})}onTemplaterNewFile(r){return g(this,null,function*(){let{file:t,contents:n}=r;this.handleNewFile(t,n)})}onTemplateAppend(r){return g(this,null,function*(){if(["start-folded","fold-and-clear"].contains(this.settings.templateCreasesBehavior)){let{view:t,newSelections:n,oldSelections:i}=r,a=[],o=[];for(let l=0;l<n.length;l++){let[u,,,c]=(0,qs.default)([i[l].anchor,i[l].head,n[l].anchor,n[l].head],["line","ch"]),p=t.editor.getRange(u,c);if(x(p))for(let f=u.line;f<=c.line;f++){let d=t.editor.getLine(f);if(x(d)&&a.push({from:f,to:f+1}),this.settings.templateCreasesBehavior==="fold-and-clear"){let y=d.replace(C,"").trimEnd();o.push({text:y,from:{line:f,ch:0},to:{line:f+1,ch:0}})}}}t.currentMode.applyFoldInfo({folds:a,lines:t.editor.lineCount()}),t.editor.transaction({changes:o})}})}decreaseFoldLevelAtCursor(r,t){return g(this,null,function*(){var o;let n=yield this.app.foldManager.load(t.file),i=(o=n==null?void 0:n.folds)!=null?o:[];r.listSelections().forEach(l=>{let u=this.getAllParentFolds(r,l);for(let c=0;c<u.length;c++){let p=u[c];if(i.find(f=>f.from===p.from)){(0,ws.default)(i,f=>f.from===p.from);break}}}),t.currentMode.applyFoldInfo({folds:i,lines:t.editor.lineCount()}),t.onMarkdownFold()})}decreaseHeadingFoldLevel(r,t){return g(this,null,function*(){var c,p,f;let n=t.currentMode.getFoldInfo(),i=(c=n==null?void 0:n.folds)!=null?c:[],a=(f=(p=this.app.metadataCache.getFileCache(t.file))==null?void 0:p.headings)!=null?f:[],o=1;for(let d of a)i.find(y=>y.from===d.position.start.line)||(o=Math.max(o,d.level));let l=a.filter(d=>d.level===o),u=[...i,...l.map(d=>({from:d.position.start.line,to:d.position.end.line}))];t.currentMode.applyFoldInfo({folds:u,lines:t.editor.lineCount()}),t.onMarkdownFold()})}increaseHeadingFoldLevel(r,t){return g(this,null,function*(){var c,p,f;let n=t.currentMode.getFoldInfo(),i=(c=n==null?void 0:n.folds)!=null?c:[],a=(f=(p=this.app.metadataCache.getFileCache(t.file))==null?void 0:p.headings)!=null?f:[],o=Math.max(...a.map(d=>d.level));for(let d of a)i.find(y=>y.from===d.position.start.line)&&(o=Math.min(o,d.level));let l=new Set(a.filter(d=>d.level<=o).map(d=>d.position.start.line)),u=i.filter(d=>!l.has(d.from));t.currentMode.applyFoldInfo({folds:u,lines:t.editor.lineCount()}),t.onMarkdownFold()})}patchMarkdownView(){let r=this,t=this.app,n=this.app.workspace.getLeaf();this.register(oe(n.view.constructor.prototype,{onMarkdownFold(i){return function(){return g(this,null,function*(){if(yield i.call(this),r.settings.syncOutlineView==="none")return;let a=this.currentMode.getFoldInfo(),o=t.workspace.getLeavesOfType("outline")[0];if(o){let l=o.view;if(l.file===this.file){let u=l.treeView;for(let c of u.allItems){let p=!!(a==null?void 0:a.folds.find(f=>f.from===c.heading.position.start.line));c.setCollapsed(p)}}}})}}}))}patchCoreTemplatePlugin(){let r=this.app.internalPlugins.getPluginById("templates");!r||this.register(oe(r.instance.constructor.prototype,{insertTemplate(t){return function(n){return g(this,null,function*(){let i=this.app.workspace.getActiveViewOfType(v.MarkdownView);if(!i)return;let a=i.editor.listSelections();yield t.call(this,n);let o=i.editor.listSelections();this.app.workspace.trigger("templates:template-appended",{content:this.app.vault.cachedRead(n),oldSelections:a,newSelections:o,view:i})})}}}))}patchCoreOutlinePlugin(){let r=this.app.workspace.getLeaf(),t;try{t=this.app.viewRegistry.viewByType.outline(r)}catch(n){return}this.register(oe(t.constructor.prototype,{getHeadings(n){return function(){let i=n.call(this);return i?i.map(a=>z(U({},a),{heading:(0,v.stripHeading)(a.heading.replace(C,""))})):null}}}))}patchFileSuggest(){let t=this.app.workspace.editorSuggest.suggests.find(n=>n.mode!==void 0);!t||this.register(oe(t.constructor.prototype,{getGlobalBlockSuggestions(n){return function(...i){return g(this,null,function*(){let a=yield n.call(this,...i);return a?a.map(o=>o.node.type!=="heading"?o:z(U({},o),{display:(0,v.stripHeading)(o.node.data.hProperties.dataHeading.replace(C,""))})):null})}},getGlobalHeadingSuggestions(n){return function(...i){return g(this,null,function*(){let a=yield n.call(this,...i);return a?a.map(o=>z(U({},o),{heading:(0,v.stripHeading)(o.heading.replace(C,""))})):null})}},getHeadingSuggestions(n){return function(...i){return g(this,null,function*(){let a=yield n.call(this,...i);return a?a.map(o=>z(U({},o),{heading:(0,v.stripHeading)(o.heading.replace(C,""))})):null})}}}))}getAllParentFolds(r,t){return this.getAllFoldableLines(r).filter(i=>og(t,i.from,i.to))}getAllFoldableLines(r){if(this.app.vault.getConfig("legacyEditor")){let n=r.cm.state.foldGutter.options,i=r.cm.foldOption(n,"rangeFinder"),a=[];for(let o=0;o<=r.lastLine();o++){let l=i(r.cm,CodeMirror.Pos(o,0));l&&a.push({from:l.from.line,to:l.to.line})}return a}let t=[];for(let n=0;n<=r.lastLine();n++){let i=r.posToOffset({line:n,ch:0}),a=(0,Cs.foldable)(r.cm.state,i,i);if(a){let o=r.offsetToPos(a.from),l=r.offsetToPos(a.to);t.push({from:o.line,to:l.line})}}return t}getRelevantFold(r,t){let n=this.getAllFoldableLines(r);for(let i=n.length-1;i>=0;i--){let a=n[i];if(a.from<=t.anchor.line&&t.anchor.line<=a.to)return a}return null}onEditorMenu(r,t,n){!t.getSelection()||r.addItem(i=>i.setTitle("Toggle crease").setIcon("shirt").onClick(()=>{this.toggleCrease(t,n)}))}toggleCrease(r,t){r.listSelections().forEach(i=>{let a=this.getRelevantFold(r,i);if(!a)return;let o=a.from,l=r.getLine(o);if(x(l)){let u={line:o,ch:0},c={line:o,ch:l.length},p=l.replace("%% fold %%","").trimEnd();r.replaceRange(p,u,c)}else{let u={line:o,ch:l.length},c={line:o,ch:l.length};r.replaceRange(" %% fold %%",u,c)}})}getCreasesFromFile(r){return g(this,null,function*(){let n=(yield this.app.vault.cachedRead(r)).split(`
`),i=[];for(let a=0;a<=n.length;a++){let o=n[a];x(o)&&i.push({from:a,to:a+1})}return i})}getCreasesFromEditor(r){let t=[];for(let n=0;n<=r.lastLine();n++){let i=r.getLine(n);x(i)&&t.push({from:n,to:n+1})}return t}foldCreasesForView(r){return g(this,null,function*(){var i;let t=r.currentMode.getFoldInfo(),n=[...(i=t==null?void 0:t.folds)!=null?i:[],...this.getCreasesFromEditor(r.editor)];r.currentMode.applyFoldInfo({folds:n,lines:r.editor.lineCount()})})}foldCreasesForFile(r){return g(this,null,function*(){var l,u,c;let t=yield this.app.vault.cachedRead(r),n=yield this.app.foldManager.load(r),a={folds:[...(l=n==null?void 0:n.folds)!=null?l:[],...yield this.getCreasesFromFile(r)],lines:(c=(u=t.match(/^/gm))==null?void 0:u.length)!=null?c:0},o=this.app.workspace.getLeavesOfType("markdown").filter(p=>p.view&&p.view instanceof v.MarkdownView&&p.view.file===r);o.length?o[0].view.currentMode.applyFoldInfo(a):yield this.app.foldManager.save(r,a)})}toggleFoldForHeadingLevel(r,t){var l,u,c;let n=(u=(l=r.currentMode.getFoldInfo())==null?void 0:l.folds)!=null?u:[],i=(((c=this.app.metadataCache.getFileCache(r.file))==null?void 0:c.headings)||[]).filter(p=>p.level===t),a=new Set(i.map(p=>p.position.start.line)),o=i[0].position.start;if(n.find(p=>p.from===o.line))r.currentMode.applyFoldInfo({folds:n.filter(p=>!a.has(p.from)),lines:r.editor.lineCount()}),r.onMarkdownFold();else{let p=[...n,...i.map(f=>({from:f.position.start.line,to:f.position.start.line+1}))];r.currentMode.applyFoldInfo({folds:p,lines:r.editor.lineCount()}),r.onMarkdownFold()}}creaseCurrentFolds(r,t){var a;let n=t.currentMode.getFoldInfo(),i=[];((a=n==null?void 0:n.folds)!=null?a:[]).forEach(o=>{let l=r.getLine(o.from);if(!x(l)){let u={line:o.from,ch:l.length};i.push({text:" %% fold %%",from:u,to:u})}}),r.transaction({changes:i})}clearCreases(r,t){let n=[];for(let i=0;i<r.lastLine();i++){let a=r.getLine(i);if(x(a)){let o=a.replace(C,"").trimEnd();n.push({text:o,from:{line:i,ch:0},to:{line:i+1,ch:0}})}}r.transaction({changes:n})}loadSettings(){return g(this,null,function*(){this.settings=Object.assign({},bs,yield this.loadData())})}saveSettings(){return g(this,null,function*(){yield this.saveData(this.settings)})}registerSettingsTab(){this.addSettingTab(new Ue(this.app,this))}};
